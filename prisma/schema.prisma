generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model buyer {
  buyerusername      String    @db.VarChar(50)
  numofpurchase Int?   @default(0)
  buyerrating   Float?
  users         user  @relation(fields: [buyerusername], references: [username], onDelete: Cascade)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model financinginfo {
  sellerusername     String    @db.VarChar(50)
  interestrate Decimal? @db.Decimal(3, 2)
  seller       seller   @relation(fields: [sellerusername], references: [susername], onDelete: Cascade)
}

model listing {
  sellerusername         String    @db.VarChar(50)
  vinnum      String   @db.VarChar(17)
  price       Decimal  @db.Decimal(10, 2)
  description String?
  datelisted  DateTime @db.Date
  users       user    @relation(fields: [sellerusername], references: [susername], onDelete: Cascade)
  vehicle     vehicle  @relation(fields: [vinnum], references: [vinnum], onDelete: Cascade)

  @@id([sellerusername, vinnum])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model seller {
  susername         String    @db.VarChar(50)
  numofsale        Int?           @default(0)
  sellerrating     Float?
  financingoffered Boolean?
  financinginfo    financinginfo?
  users            user          @relation(fields: [susername], references: [username], onDelete: Cascade)
}

model user {
  username   String    @db.VarChar(50)
  firstname  String    @db.VarChar(50)
  middleinit String?   @db.Char(1)
  lastname   String    @db.VarChar(50)
  buyer      buyer?
  listing    listing[]
  seller     seller?
}

model vehicle {
  vinnum   String    @id @db.VarChar(17)
  year     Int
  make     String    @db.VarChar(50)
  model    String    @db.VarChar(50)
  trim_lvl String?   @db.VarChar(50)
  mileage  Int
  color    String?   @db.VarChar(30)
  type     String?   @db.VarChar(20)
  listing  listing[]
}
